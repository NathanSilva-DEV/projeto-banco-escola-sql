DROP TABLE ALUNOS;
DROP TABLE ALUNOS_CURSOS;
DROP TABLE DOCENTES;
DROP TABLE MATRICULAS;
DROP TABLE COMPONENTES;
DROP TABLE CURSOS;
 
-- TABELA DE ALUNOS
CREATE TABLE ALUNOS(
    ID_ALUNO NUMBER(5) PRIMARY KEY, 
    NOME VARCHAR2(50) NOT NULL, 
    NASCIMENTO DATE NOT NULL,
    CPF NUMBER(11) NOT NULL UNIQUE, 
    CELULAR NUMBER(11), 
    NOME_MAE VARCHAR2(50) NOT NULL, 
    NOME_PAI VARCHAR2(50), 
    SEXO CHAR(1)
);

-- TABELA DE ALUNOS_CURSOS
CREATE TABLE ALUNOS_CURSOS(
    ID_ALUNO NUMBER(5),
    CURSO NUMBER(2),    
    STATUS CHAR(1) CHECK (STATUS IN ('A', 'R', 'C')),
    PRIMARY KEY (ID_ALUNO, CURSO),
    FOREIGN KEY(ID_ALUNO) REFERENCES ALUNOS(ID_ALUNO),
    FOREIGN KEY(CURSO) REFERENCES CURSOS(CURSO)
);

-- TABELA DE DOCENTES
CREATE TABLE DOCENTES(
    ID_DOCENTE NUMBER(5) PRIMARY KEY,
    NOME VARCHAR2(50) NOT NULL,
    CPF NUMBER(11),
    CONSTRAINT DOCENTES_CPF_UK UNIQUE(CPF)
);

-- TABELA MATRICULAS
CREATE TABLE MATRICULAS(
    MATRICULA NUMBER(6) PRIMARY KEY,
    CADASTRO DATE NOT NULL,
    COMPONENTE NUMBER(3),
    ID_ALUNO NUMBER(5),
    CURSO NUMBER(2),
    PONTUACAO NUMBER(5,2),
    FOREIGN KEY(COMPONENTE) REFERENCES COMPONENTES(COMPONENTE),
    FOREIGN KEY(ID_ALUNO) REFERENCES ALUNOS(ID_ALUNO),
    FOREIGN KEY(CURSO) REFERENCES CURSOS(CURSO)
);

-- TABELA COMPONENTES
CREATE TABLE COMPONENTES(
    COMPONENTE NUMBER(3) PRIMARY KEY,
    NOME VARCHAR2(30) UNIQUE NOT NULL,
    PRECO NUMBER(5,2),
    CARGA_HORARIA NUMBER(4,1) NOT NULL,
    ID_DOCENTE NUMBER(5),
    FOREIGN KEY(ID_DOCENTE) REFERENCES DOCENTES(ID_DOCENTE)
);

-- CURSOS
CREATE TABLE CURSOS(
    CURSO NUMBER(2) PRIMARY KEY,
    NOME VARCHAR2(30) UNIQUE NOT NULL
);

-- INSERINDO VALORES NA TABELA ALUNOS
-- FEMININO
INSERT INTO ALUNOS(ID_ALUNO, NOME, NASCIMENTO, CPF, CELULAR, NOME_MAE, NOME_PAI, SEXO)
    VALUES (1, 'MICAELA SILVA', TO_DATE('2005-11-05', 'YYYY-MM-DD'), 12345678901, 34987654321, 'ANA SILVA', 'JOÃO SILVA', 'F');

INSERT INTO ALUNOS(ID_ALUNO, NOME, NASCIMENTO, CPF, CELULAR, NOME_MAE, NOME_PAI, SEXO)
    VALUES (2, 'FERNANDA SOUZA', TO_DATE('1999-09-15', 'YYYY-MM-DD'), 23456789012, 34987651234, 'CLAUDIA SOUZA', 'ROBERTO SOUZA', 'F');

INSERT INTO ALUNOS(ID_ALUNO, NOME, NASCIMENTO, CPF, CELULAR, NOME_MAE, NOME_PAI, SEXO)
    VALUES (3, 'JULIANA COSTA', TO_DATE('2001-01-20', 'YYYY-MM-DD'), 34567890123, 34986543210, 'MARCIA COSTA', 'CARLOS COSTA', 'F');

-- MASCULINO
INSERT INTO ALUNOS(ID_ALUNO, NOME, NASCIMENTO, CPF, CELULAR, NOME_MAE, NOME_PAI, SEXO)
    VALUES (4, 'PEDRO ALMEIDA', TO_DATE('2000-03-12', 'YYYY-MM-DD'), 45678901234, 34985432109, 'LUCIA ALMEIDA', 'ANTONIO ALMEIDA', 'M');

INSERT INTO ALUNOS(ID_ALUNO, NOME, NASCIMENTO, CPF, CELULAR, NOME_MAE, NOME_PAI, SEXO)
    VALUES (5, 'LUCAS TEIXEIRA', TO_DATE('1928-07-25', 'YYYY-MM-DD'), 56789012345, 34984321098, 'RAFAELA TEIXEIRA', 'CLEBER TEIXEIRA', 'M');

-- INSERINDO OS PROFESSORES A TABELA DOCENTES
INSERT INTO DOCENTES(ID_DOCENTE, NOME, CPF)
    VALUES (1, 'HUMBERTO', 55493159723);

INSERT INTO DOCENTES(ID_DOCENTE, NOME, CPF)
    VALUES (2, 'LUCIANO', 57693455190);

INSERT INTO DOCENTES(ID_DOCENTE, NOME, CPF)
    VALUES (3, 'ANDRÉ', 97652843108);

-- INSERINDO NA TABELA COMPONENTES (ASSOCIANDO DOCENTES E CURSOS)
-- PROFESSOR HUMBERTO
INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (1, 'BANCO DE DADOS', 100.00, 40.0, 1);

INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (2, 'PROCESSAMENTO DE IMAGENS', 60.00, 20.0, 1);

INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (3, 'ADMINISTRAÇÃO PARA EMPRESAS', 250.00, 80.0, 1);

-- PROFESSOR LUCIANO
INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (4, ' ALGORITMO', 200.00, 20.0, 2);

INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (5, 'SEGURANÇA', 80.00, 30.0, 2);

INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (6, 'REDES', 250.00, 80.0, 2);

INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (7, 'GESTÃO DE NEGÓCIOS', 450.00, 100.0, 2);

-- PROFESSOR ANDRÉ
INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (8, 'ESTRUTURA DE DADOS', 60.00, 20.0, 3);

INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (9, 'PROGRAMAÇÃO EM PYTHON', 150.00, 60.0, 3);

INSERT INTO COMPONENTES(COMPONENTE, NOME, PRECO, CARGA_HORARIA, ID_DOCENTE)
    VALUES (10, 'CÁLCULO I', 100.00, 40.0, 3);

-- CADASTRANDO CURSOS NA TABELA CURSOS
INSERT INTO CURSOS(CURSO, NOME)
    VALUES (1, 'SISTEMAS DE INFORMAÇÃO');

INSERT INTO CURSOS(CURSO, NOME)
    VALUES (2, 'ADMINISTRAÇÃO');

-- CADASTRO DE ALUNOS NOS CURSOS DE SISTEMAS E ADMINISTRAÇÃO
INSERT INTO ALUNOS_CURSOS(ID_ALUNO, CURSO, STATUS)
    VALUES (1, 1, 'C');

INSERT INTO ALUNOS_CURSOS(ID_ALUNO, CURSO, STATUS)
    VALUES (2, 1, 'C');

INSERT INTO ALUNOS_CURSOS(ID_ALUNO, CURSO, STATUS)
    VALUES (3, 2, 'C');

INSERT INTO ALUNOS_CURSOS(ID_ALUNO, CURSO, STATUS)
    VALUES (4, 2, 'C');

INSERT INTO ALUNOS_CURSOS(ID_ALUNO, CURSO, STATUS)
    VALUES (5, 2, 'C');

-- MATRICULA DOS ALUNOS DE SISTEMAS NOS COMPONENTES DESEJADOS
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (1, SYSDATE, 1, 1, 1, NULL);
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (2, SYSDATE, 5, 1, 1, NULL);
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (3, SYSDATE, 8, 1, 1, NULL);   

INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (4, SYSDATE, 6, 2, 1, NULL); 
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (5, SYSDATE, 1, 2, 1, NULL); 
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (6, SYSDATE, 9, 2, 1, NULL);

-- MATRICULA DOS ALUNOS DE ADMINISTRAÇÃO NOS COMPONENTES DESEJADOS
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (7, SYSDATE, 7, 3, 2, NULL);
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (8, SYSDATE, 10, 3, 2, NULL);
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (9, SYSDATE, 3, 3, 2, NULL);

INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (10, SYSDATE, 7, 4, 2, NULL);
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (11, SYSDATE, 10, 4, 2, NULL);
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (12, SYSDATE, 3, 4, 2, NULL);

INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (13, SYSDATE, 7, 5, 2, NULL);
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (14, SYSDATE, 10, 5, 2, NULL);
INSERT INTO MATRICULAS(MATRICULA, CADASTRO, COMPONENTE, ID_ALUNO, CURSO, PONTUACAO)
    VALUES (15, SYSDATE, 3, 5, 2, NULL);

-- ALTERANDO VALOR DO COMPONENTE PROCESSAMENTO DE IMAGENS
UPDATE COMPONENTES
SET CARGA_HORARIA = 40.0
WHERE NOME = 'PROCESSAMENTO DE IMAGENS';

-- ALTERANDO A PONTUAÇÃO DOS ALUNOS DE SISTEMAS
UPDATE MATRICULAS
SET PONTUACAO = 60.00
WHERE ID_ALUNO IN (1,2) AND CURSO = 1;

-- ALTERANDO O STATUS DOS ALUNOS DE SISTEMAS
UPDATE ALUNOS_CURSOS
SET STATUS = 'A'
WHERE ID_ALUNO IN (1,2) AND CURSO = 1;

-- EXCLUINDO O COMPONENTE PROCESSAMENTO DE IMAGENS
DELETE FROM COMPONENTES
WHERE NOME = 'PROCESSAMENTO DE IMAGENS';

